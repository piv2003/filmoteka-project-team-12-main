{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-cb6ec8b3176d9bc9.js","src/js/page-watched.js","node_modules/@parcel/runtime-js/lib/runtime-678248108fc52d68.js","src/js/picture-not-found.js","src/js/queue-watched-modal.js","src/js/page-queued.js","node_modules/@parcel/runtime-js/lib/runtime-0f9f9f36e2ea1387.js","src/library.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2Y0K8\\\":\\\"library.5e32094f.js\\\",\\\"jqQrI\\\":\\\"poster-plug.77123679.png\\\",\\\"7J45r\\\":\\\"zdun.5b228a39.png\\\"}\"));","import cardsMarkup from '../js/cards-markup';\nimport { filmsNotFoundTwo } from '../js/picture-not-found';\n\nconst btnWatched = document.querySelector('#watched-btn');\nconst btnQueue = document.querySelector('#queue-btn');\nconst sectionEl = document.querySelector('.films-catalog');\n\nbtnWatched.addEventListener('click', addWatchedMarkup);\n\n\nexport default function addWatchedMarkup() {\n  const markupArr = localStorage.getItem('watched-movies');\n  const markupArrParse = JSON.parse(markupArr);\n  btnWatched.classList.add('library_btn--active');\n  btnQueue.classList.remove('library_btn--active');\n  if (!markupArrParse || markupArrParse.length === 0) {\n    filmsNotFoundTwo();\n  } else {\n    const strokeMarkup = cardsMarkup(markupArrParse);\n    sectionEl.innerHTML = strokeMarkup;\n  }\n  }\n","module.exports = require('./helpers/bundle-url').getBundleURL('2Y0K8') + require('./helpers/bundle-manifest').resolve(\"7J45r\");","import zhdun from '../images/waiting/zdun.png';\n\nconst imgNotFound = `<div class='not-found_container'>\n<h2 class=\"library_not-found-text\">Are you serious? No movies have been added yet. \nOk, I'll wait. </br><a href=\"./index.html\" class=\"link_to-home\">Go home page.</a></h1>\n<img src=\"${zhdun}\" width=\"400px\" class='img_not-found'>\n    </div>`;\n\nfunction filmsNotFound() {\n  const containerEl = document.querySelector('.container-catalog');\n\n  containerEl.innerHTML = imgNotFound;\n}\n\nfunction filmsNotFoundTwo() {\n  const containerEl = document.querySelector('.films-catalog');\n\n  containerEl.innerHTML = imgNotFound;\n}\n\nexport { filmsNotFound, filmsNotFoundTwo };\n","import addQueuedMarkup from './page-queued.js';\nimport addWatchedMarkup from './page-watched.js';\nimport localStorageLibrary from './modalBtns.js';\nimport posterPlug from '../images/utility-images/poster-plug.png';\n// Получение объекта из localStorage\n\nlet currentMovies = JSON.parse(localStorage.getItem('watched-movies'));\nconst queueBtn = document.querySelector('[data-queue]');\nconst watchBtn = document.querySelector('[data-watch]');\n\nqueueBtn.addEventListener('click', addQueueJson);\nwatchBtn.addEventListener('click', addWatchJson);\n\n// Парс если в queue\nfunction addQueueJson() {\n  currentMovies = JSON.parse(localStorage.getItem('queued-movies'));\n  //console.log(currentMovies);\n  return currentMovies;\n}\n// Парс если в watch\nfunction addWatchJson() {\n  currentMovies = JSON.parse(localStorage.getItem('watched-movies'));\n  console.log(currentMovies);\n  return currentMovies;\n}\n\n// <!-- функция открытия и разметки модалки\nfunction modalOpen() {\n  const refs = {\n    openModalCard: document.querySelector('.container-catalog'),\n    modal: document.querySelector('[data-modal]'),\n    modalContainer: document.querySelector('.modal-container'),\n  };\n\n  refs.openModalCard.addEventListener('click', openModal);\n  function openModal(evt) {\n    document.body.style.overflow = 'hidden';\n    const filmCard = evt.target.closest('.film-card__link');\n    if (!filmCard) {\n      return;\n    }\n    refs.modal.classList.toggle('is-hidden');\n\n    window.addEventListener('keydown', onEscapeKeyPress);\n    // получение id  по нажатому объекту\n    const filmId = Number(filmCard.dataset.id);\n    //console.log(filmId);\n\n    const currentFilm = currentMovies.find(({ id }) => id === filmId);\n\n    // ФУНКЦИЯ РАЗМЕТКИ МОДАЛКИ\n    function modalMarkup() {\n      //  формирование массива жанров карточки :\n      const genresArr = currentFilm.genre_ids;\n      const genresObj = addGenre();\n      let genresFilm = [];\n      genresArr.map(el => genresFilm.push(genresObj[el]));\n\n      // Подстановка данных в шаблонный рядок модалки\n      // если нет картинки на постере, то заглушка\n      let imgUrl = !currentFilm.poster_path\n        ? posterPlug\n        : `https://image.tmdb.org/t/p/w500${currentFilm.poster_path}`;\n\n      const title = currentFilm.title;\n      const vote = Number(currentFilm.vote_average).toFixed(1);\n      const votes = currentFilm.vote_count;\n      const popularity = Number(currentFilm.popularity).toFixed(1);\n      let genre = genresFilm.join(', ');\n      if (!genre) {\n        genre = 'no information';\n      }\n      let about = currentFilm.overview;\n      if (!about) {\n        about = 'no information, but coming soon';\n      }\n\n      const markup = `<div class=\"img-box\">\n           <img\n             class=\"img-modal\"\n             src=\"${imgUrl}\"\n             alt=\"${title}\"\n             width=\"240px\"\n           />\n         </div>\n         <div class=\"content-box\">\n           <div class=\"text-box\">\n             <h2 class=\"modal-title\">${title}</h2>\n             <table>\n               <tbody class=\"tbody\">\n                 <tr>\n                   <td class=\"tbody-category\">Vote / Votes</td>\n                   <td class=\"tbody-vote\">${vote}</td>\n                   <td class=\"tbody-slash\">/</td>\n                   <td class=\"tbody-votes\">${votes}</td>\n                   <td></td>\n                 </tr>\n                 <tr>\n                   <td class=\"tbody-category\">Popularity</td>\n                   <td colspan=\"4\">${popularity}</td>\n                   <td></td>\n                   <td></td>\n                 </tr>\n                 <tr>\n                   <td class=\"tbody-category\">Original Title</td>\n                   <td class=\"tbody-category__text\" colspan=\"4\">${title}</td>\n                   <td></td>\n                   <td></td>\n                 </tr>\n                 <tr>\n                   <td class=\"tbody-category\">Genre</td>\n                   <td class=\"tbody-category__text\" colspan=\"4\">${genre}</td>\n                   <td></td>\n                   <td></td>\n                 </tr>\n               </tbody>\n             </table>\n      \n             <h3 class=\"modal-subtitle\">About</h3>\n             <p class=\"textAbout\">\n               ${about}\n             </p>\n           </div>\n           <div class=\"btn-container\">\n             <button class=\"js-toWatched btn-click-modal\">add to watched</button>\n             <button class=\"js-toQueue btn-click-modal\">add to queue</button>\n           </div>\n         </div>`;\n\n      refs.modalContainer.innerHTML = markup;\n    }\n    modalMarkup();\n    localStorageLibrary(currentFilm);\n  }\n}\nmodalOpen();\n\n// Функция закрытия модалки\nfunction modalClose() {\n  const refs = {\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    modal: document.querySelector('[data-modal]'),\n  };\n\n  refs.closeModalBtn.addEventListener('click', toggleModal);\n  function toggleModal() {\n    console.log('close');\n    document.body.style.overflow = 'auto';\n    if (queueBtn.classList.contains('library_btn--active')) {\n      addQueuedMarkup();\n    }\n    if (watchBtn.classList.contains('library_btn--active')) {\n      addWatchedMarkup();\n    }\n\n    refs.modal.classList.toggle('is-hidden');\n  }\n  window.removeEventListener('keydown', onEscapeKeyPress);\n}\nmodalClose();\n\n// Функция создания объекта жанров\nfunction addGenre() {\n  const genre = JSON.parse(localStorage.getItem('Genre'));\n\n  const genreId = genre.flatMap(el => el.id);\n  const genreName = genre.flatMap(el => el.name);\n  const genreObj = genreId.reduce(\n    (acc, id, i) => ({ ...acc, [id]: genreName[i] }),\n    {}\n  );\n\n  return genreObj;\n}\naddGenre();\n\n//закриття по бекдропу та Esc\nconst backdrop = document.querySelector('.backdrop');\nbackdrop.addEventListener('click', onBackdropClick);\nfunction onBackdropClick(event) {\n  if (event.currentTarget === event.target) {\n    document.body.style.overflow = 'auto';\n    document.querySelector('[data-modal]').classList.toggle('is-hidden');\n    //console.log('close');\n    if (queueBtn.classList.contains('library_btn--active')) {\n      addQueuedMarkup();\n    }\n    if (watchBtn.classList.contains('library_btn--active')) {\n      addWatchedMarkup();\n    }\n  }\n  window.removeEventListener('keydown', onEscapeKeyPress);\n}\n\nfunction onEscapeKeyPress(event) {\n  // console.log(event.code);\n  document.body.style.overflow = 'auto';\n  if (event.code === 'Escape') {\n    document.querySelector('[data-modal]').classList.toggle('is-hidden');\n    console.log('close');\n    if (queueBtn.classList.contains('library_btn--active')) {\n      addQueuedMarkup();\n    }\n    if (watchBtn.classList.contains('library_btn--active')) {\n      addWatchedMarkup();\n    }\n    window.removeEventListener('keydown', onEscapeKeyPress);\n  }\n}\n","import cardsMarkup from '../js/cards-markup';\nimport { filmsNotFoundTwo } from '../js/picture-not-found';\n\nconst library = document.querySelector('.films-catalog');\nconst watchedBtn = document.querySelector(`#watched-btn`);\nconst queueBtn = document.querySelector(`#queue-btn`);\n\nqueueBtn.addEventListener('click', addQueuedMarkup);\nexport default function addQueuedMarkup() {\n  const queuedMovies = JSON.parse(localStorage.getItem('queued-movies'));\n\n  watchedBtn.classList.remove('library_btn--active');\n  queueBtn.classList.add('library_btn--active');\n\n  if (!queuedMovies || queuedMovies.length === 0) {\n    filmsNotFoundTwo();\n    return;\n  }\n   library.innerHTML = cardsMarkup(queuedMovies);\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('2Y0K8') + require('./helpers/bundle-manifest').resolve(\"jqQrI\");","import addWatchedMarkup from './js/page-watched';\naddWatchedMarkup();\nimport './js/queue-watched-modal';\nimport './js/lightSwitch';\nimport './js/btn-up';\n\n"],"names":["parcelRequire","register","JSON","parse","$latFS","$1bf7b7d19baaf324$exports","getBundleURL","resolve","$f7144d7ab43f14d4$var$imgNotFound","concat","$parcel$interopDefault","$f7144d7ab43f14d4$export$64173803f27c2a58","document","querySelector","innerHTML","$9d881accd3530837$var$btnWatched","$9d881accd3530837$var$btnQueue","$9d881accd3530837$var$sectionEl","$9d881accd3530837$export$2e2bcd8739ae039","markupArr","localStorage","getItem","markupArrParse","classList","add","remove","length","strokeMarkup","default","addEventListener","$hKHmD","$16755be8c17900b9$var$library","$16755be8c17900b9$var$watchedBtn","$16755be8c17900b9$var$queueBtn","$16755be8c17900b9$export$2e2bcd8739ae039","queuedMovies","$05fcfd6854052661$exports","refs","$70349f8a205bb0a1$var$currentMovies","$70349f8a205bb0a1$var$queueBtn","$70349f8a205bb0a1$var$watchBtn","$70349f8a205bb0a1$var$addGenre","genre","genreId","flatMap","el","id","genreName","name","reduce","acc","i","$dDDEV","$70349f8a205bb0a1$var$onEscapeKeyPress","event","body","style","overflow","code","toggle","console","log","contains","window","removeEventListener","openModalCard","modal","modalContainer","evt","filmCard","target","closest","filmId","Number","dataset","currentFilm","find","param","genresArr","genre_ids","genresObj","genresFilm","map","push","imgUrl","poster_path","title","vote","vote_average","toFixed","votes","vote_count","popularity","join","about","overview","markup","modalMarkup","$deuvv","closeModalBtn","$70349f8a205bb0a1$var$modalClose","currentTarget"],"version":3,"file":"library.5e32094f.js.map"}